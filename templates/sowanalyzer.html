<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOWAnalyzer</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='js/sowanalyzer.js') }}"></script>
</head>
<body>
    <h1>SOWAnalyzer</h1>
    <div class="navbar">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/mass_operations">–ú–∞—Å—Å –æ–ø–µ—Ä–∞—Ü–∏–∏</a>
        <a href="/sowanalyzer">SOWAnalyzer</a>
    </div>
    <form id="searchForm" action="/sowanalyzer" method="post">
        <div class="form-group-horizontal">
            <label for="start_time">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:</label>
            <input type="datetime-local" id="start_time" name="start_time" class="form-control" value="{{ request.form['start_time'] }}">

            <label for="end_time">–î–∞—Ç–∞ –∫–æ–Ω—Ü–∞:</label>
            <input type="datetime-local" id="end_time" name="end_time" class="form-control" value="{{ request.form['end_time'] }}">

            <label for="path">–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å –ª–æ–≥–∞–º–∏:</label>
            <select id="log_directory" name="selected_directory" class="form-control">
                {% for directory in log_directories %}
                    <option value="{{ directory }}" {% if directory == selected_directory %}selected{% endif %}>{{ directory }}</option>
                {% endfor %}
            </select>
            <input type="hidden" name="path" value="{{ selected_directory }}">
        </div>
        <div class="form-group">
            <label for="pattern">Pattern:</label>
            <input type="text" id="pattern" name="pattern" class="form-control" value="{{ request.form['pattern'] }}">
        </div>
        <button type="submit" class="btn btn-primary">üîç –ü–æ–∏—Å–∫</button>
        <button type="button" class="btn btn-secondary" id="exportButton">üìÑ –≠–∫—Å–ø–æ—Ä—Ç –≤ TXT</button>
    </form>

    <table id="results-table" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</th>
                <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
                <th>–ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É</th>
            </tr>
        </thead>
        <tbody id="resultsTableBody">
            {% if results %}
                {% for result in results %}
                    <tr>
                        <td>{{ result.timestamp }}</td>
                        <td>{{ result.message }}</td>
                        <td>{{ result.file_path }}</td>
                    </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
    <div id="owl-animation" style="display: none;">
        <img id="owl" src="/static/img/owl.gif" alt="Owl">
    </div>
</body>
</html>